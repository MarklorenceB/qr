<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Home | Sample</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/main.scss" />
    <link rel="stylesheet" href="css/responsive.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link href="https://fonts.cdnfonts.com/css/bebas-neue" rel="stylesheet" />
    <link
      href="https://fonts.cdnfonts.com/css/samsung-sharp-sans"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- FOR HEADER -->

    <header>
      <div class="container">
        <div class="navbar-container" id="navbar">
          <nav class="navbar navbar-expand-lg main_nav">
            <a class="navbar-brand" href="index.html">
              <img src="images/logo.png" class="no-filter" />
            </a>
            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarCollapse"
              aria-controls="navbarCollapse"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="nav-toggle__text"></span>
            </button>
            <!-- <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav ml-auto no-filter">
                  <li class="nav-item active">
                    <a href="#experience">Experience</a>
                  </li>
                  <li class="nav-item">
                    <a href="#focus">Focus</a>
                  </li>
                  <li class="nav-item">
                    <a href="#dealSourcing">Deal Sourcing</a>
                  </li>
                  <li class="nav-item">
                    <a href="#strategy">Strategy</a>
                  </li>
                  <li class="nav-item">
                    <a href="#investorCommunications">Investor Communications</a>
                  </li>
                  <li class="nav-item contact-btn">
                    <a href="#contactus">Contact Us</a>
                  </li>
                </ul>
              </div> -->
          </nav>
        </div>
      </div>
    </header>

    <main>
      <!-- FOR SECTIONS -->

      <section
        class="home-banner home-def h-auto-3 bg-common home-2 rel"
        style="background-image: url(images/web2.png)"
      >
        <div class="container w-100 z-top">
          <div class="mb-3">
            <a href="upload-page-latest.html" class="back-btn">
              <img src="images/data/back.png" alt="" />
              Back
            </a>
          </div>
          <div class="row wrapper">
            <div class="col-lg-6">
              <div class="content-2">
                <h1>Upload HERO PICTURES OF LOVED ONE</h1>

                <div class="head-upload">
                  <h5>Choose files to upload</h5>
                  <button onclick="browseFile()">Browse File</button>

                  <!-- Hidden file input element -->
                  <input
                    type="file"
                    id="fileInput"
                    style="display: none"
                    onchange="uploadFile(this)"
                  />
                  <!-- <a href="#">Browse files</a> -->
                </div>
                <div class="drop-wrapper">
                  <div class="drop-zone z-top pink-dashed-border">
                    <img src="images/upload.png" alt="" />

                    <h3>Drag and drop files here</h3>
                    <h4>or</h4>
                    <span class="drop-zone__prompt">Browse files</span>
                    <input
                      type="file"
                      name="myFile"
                      class="drop-zone__input"
                      id="fileInput"
                      onchange="handleFileUpload()"
                    />
                  </div>
                  <div class="drop-details text-center z-top">
                    <p>From Childhood to adulthood Family Picture</p>
                  </div>

                  <!-- <div class="upload-container">
                    <input
                      type="file"
                      id="fileInput"
                      onchange="handleFileUpload()"
                    />
                    <div class="progress-bar-container">
                      <div id="progressBar" class="progress-bar"></div>
                    </div>
                  </div> -->
                </div>
                <div class="upload-container-2">
                  <div class="download-1">
                    <div class="prof">
                      <img src="images/sample-img.png" alt="" />
                    </div>
                    <div class="name-con">
                      <div class="name">
                        <h3>johnsmith.jpg</h3>
                        <h4>(428KB)</h4>
                      </div>
                    </div>
                    <div class="img-check">
                      <a href="#">
                        <img src="images/check.png" alt="" />
                      </a>
                    </div>
                  </div>

                  <div class="download-2">
                    <div class="prof">
                      <img src="images/sample3.png" alt="" />
                    </div>
                    <div class="graph">
                      <div class="name">
                        <h3>johnsmith.jpg</h3>
                        <h4>(428KB)</h4>
                      </div>
                      <img src="images/bar.png" alt="" />
                    </div>
                    <div class="img-check">
                      <h6>70%</h6>
                      <a href="#">
                        <img src="images/x.png" alt="" />
                      </a>
                    </div>
                  </div>

                  <!-- <div id="progressContainer" class="progress-container">
                    <div class="flex-container">
                      <div class="images">
                        <img id="thumbnail" class="thumbnail" alt="Thumbnail" />
                      </div>
                      <div id="progressBar" class="progress-bar"></div>

                      <div id="progressText" class="progress-text">
                        0% - 0 KB / 0 KB -
                      </div>
                    </div>
                  </div> -->
                </div>

                <div class="description">
                  <form>
                    <input
                      type="text"
                      placeholder="Brief description of picture"
                    />
                  </form>
                  <!-- <p>Brief description of picture</p> -->
                </div>
                <div id="overlay" class="overlay"></div>
                <a href="#">
                  <button class="btn-submit" onclick="showPopup()">
                    submit
                  </button></a
                >
                <div id="successPopup" class="popup">
                  Uploaded Successfully!
                </div>
              </div>
            </div>
            <div class="col-lg-6"></div>
          </div>
        </div>
      </section>
    </main>

    <!-- FOR FOOTER -->

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.matchHeight.js"></script>
    <script src="js/main.js"></script>
    <script type="text/javascript"></script>

    <script type="text/javascript">
      function showPopup() {
        // Display the overlay
        document.getElementById("overlay").style.display = "block";

        // Display the success popup
        document.getElementById("successPopup").style.display = "block";

        // Hide the overlay and popup after a delay (e.g., 2 seconds)
        setTimeout(function () {
          document.getElementById("overlay").style.display = "none";
          document.getElementById("successPopup").style.display = "none";
        }, 2000); // 2000 milliseconds = 2 seconds
      }

      document.querySelectorAll(".drop-zone__input").forEach((inputElement) => {
        const dropZoneElement = inputElement.closest(".drop-zone");

        dropZoneElement.addEventListener("click", (e) => {
          inputElement.click();
        });

        inputElement.addEventListener("change", (e) => {
          if (inputElement.files.length) {
            updateThumbnail(dropZoneElement, inputElement.files[0]);
          }
        });

        dropZoneElement.addEventListener("dragover", (e) => {
          e.preventDefault();
          dropZoneElement.classList.add("drop-zone--over");
        });

        ["dragleave", "dragend"].forEach((type) => {
          dropZoneElement.addEventListener(type, (e) => {
            dropZoneElement.classList.remove("drop-zone--over");
          });
        });

        dropZoneElement.addEventListener("drop", (e) => {
          e.preventDefault();

          if (e.dataTransfer.files.length) {
            inputElement.files = e.dataTransfer.files;
            updateThumbnail(dropZoneElement, e.dataTransfer.files[0]);
          }

          dropZoneElement.classList.remove("drop-zone--over");
        });
      });

      function browseFile() {
        // Trigger click on the hidden file input element
        document.getElementById("fileInput").click();
      }

      function uploadFile(input) {
        // Get the selected file
        const file = input.files[0];

        // You can add additional logic here to handle the uploaded file

        // For now, let's just log the file information to the console
        if (file) {
          console.log("File selected:", file.name);
          console.log("File size:", file.size, "bytes");
        }
      }

      /**
       * Updates the thumbnail on a drop zone element.
       *
       * @param {HTMLElement} dropZoneElement
       * @param {File} file
       */
      function updateThumbnail(dropZoneElement, file) {
        let thumbnailElement =
          dropZoneElement.querySelector(".drop-zone__thumb");

        // First time - remove the prompt
        if (dropZoneElement.querySelector(".drop-zone__prompt")) {
          dropZoneElement.querySelector(".drop-zone__prompt").remove();
        }

        // First time - there is no thumbnail element, so lets create it
        if (!thumbnailElement) {
          thumbnailElement = document.createElement("div");
          thumbnailElement.classList.add("drop-zone__thumb");
          dropZoneElement.appendChild(thumbnailElement);
        }

        thumbnailElement.dataset.label = file.name;

        // Show thumbnail for image files
        if (file.type.startsWith("image/")) {
          const reader = new FileReader();

          reader.readAsDataURL(file);
          reader.onload = () => {
            thumbnailElement.style.backgroundImage = `url('${reader.result}')`;
          };
        } else {
          thumbnailElement.style.backgroundImage = null;
        }
      }

      lightbox.option({
        resizeDuration: 200,
        wrapAround: true,
      });

      function handleFileUpload() {
        const fileInput = document.getElementById("fileInput");
        const progressBar = document.getElementById("progressBar");
        const progressText = document.getElementById("progressText");
        const thumbnail = document.getElementById("thumbnail");

        if (fileInput.files.length > 0) {
          const file = fileInput.files[0];
          const fileSize = file.size;
          const fileSizeKB = fileSize / 1024; // Convert bytes to kilobytes
          const fileName = file.name;

          // Display thumbnail if the file is an image
          if (file.type.startsWith("image/")) {
            const reader = new FileReader();
            reader.onload = function (e) {
              thumbnail.src = e.target.result;
            };
            reader.readAsDataURL(file);
          } else {
            // Clear the thumbnail if the file is not an image
            thumbnail.src = "";
          }

          const reader = new FileReader();

          reader.onload = function (e) {
            // Simulate file upload progress
            let progress = 0;
            const interval = setInterval(function () {
              progress += 1;
              const currentProgress = (progress / fileSize) * 100;
              progressBar.style.width = `${currentProgress}%`;
              progressText.innerText = `${Math.round(
                currentProgress
              )}% - ${Math.round(progress / 1024)} KB / ${Math.round(
                fileSizeKB
              )} KB - ${fileName}`;

              if (progress >= fileSize) {
                clearInterval(interval);
              }
            }, 10);
          };

          reader.readAsDataURL(file);
        }
      }

      //   let isUploadComplete = false;
      //   let reader = null;

      //   function handleFileUpload() {
      //     // Reset the state when a new file is selected
      //     isUploadComplete = false;

      //     const fileInput = document.getElementById("fileInput");
      //     const progressBar = document.getElementById("progressBar");
      //     const progressText = document.getElementById("progressText");
      //     const thumbnail = document.getElementById("thumbnail");
      //     const actionIcon = document.getElementById("actionIcon");

      //     // Clear any existing FileReader
      //     if (reader) {
      //       reader.abort();
      //       reader = null;
      //     }

      //     if (fileInput.files.length > 0) {
      //       const file = fileInput.files[0];
      //       const fileSize = file.size;
      //       const fileSizeKB = fileSize / 1024; // Convert bytes to kilobytes
      //       const fileName = file.name;

      //       // Display thumbnail if the file is an image
      //       if (file.type.startsWith("image/")) {
      //         const newReader = new FileReader();
      //         newReader.onload = function (e) {
      //           thumbnail.src = e.target.result;
      //         };
      //         newReader.readAsDataURL(file);
      //         reader = newReader;
      //       } else {
      //         // Clear the thumbnail if the file is not an image
      //         thumbnail.src = "";
      //       }

      //       const newReader = new FileReader();

      //       newReader.onload = function (e) {
      //         // Simulate file upload progress
      //         let progress = 0;
      //         const interval = setInterval(function () {
      //           if (isUploadComplete) {
      //             clearInterval(interval);
      //             return;
      //           }

      //           progress += 1;
      //           const currentProgress = (progress / fileSize) * 100;
      //           progressBar.style.width = `${currentProgress}%`;
      //           progressText.innerText = `${Math.round(
      //             currentProgress
      //           )}% - ${Math.round(progress / 1024)} KB / ${Math.round(
      //             fileSizeKB
      //           )} KB - ${fileName}`;

      //           if (progress >= fileSize) {
      //             isUploadComplete = true;
      //             clearInterval(interval);
      //             // Add any additional actions to perform when upload is complete
      //             // For example, you can trigger an event or display a completion message
      //             actionIcon.classList.remove("fa-times");
      //             actionIcon.classList.add("fa-check-circle");
      //             actionIcon.style.color = "#4CAF50"; // Change color to green
      //             console.log("Upload complete!");
      //           }
      //         }, 10);
      //       };

      //       newReader.readAsDataURL(file);

      //       // Enable action icon
      //       actionIcon.classList.add("fa-times");
      //       actionIcon.classList.remove("fa-check-circle");
      //       actionIcon.style.color = "#CFCFCF"; // Reset color to placeholder
      //     }
      //   }
    </script>
  </body>
</html>
